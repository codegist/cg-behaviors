<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="cg-base-behavior.html">

<script>
var CGDocumentEventBehavior = {
    listensTo:function(event, callback){
        document.addEventListener(event, function(e){
            if(e.detail.source == this) return;
            console.log(this.toString(), "receiving "+event+"[type:"+e.detail.type+"]");
            callback.call(this, e.detail.type, e.detail, e);
        }.bind(this));
    },
    fireDocument:function(eventType, type, params, source){
        console.log(this.toString(), "fireApplication(eventType:"+eventType+", type:"+type+", params:"+CG.Utils.Json.stringify(params, true, 40)+")");
        this.asyncFire(eventType, {type:type, params:params, source:source || this}, {node:document});
    }
};

CG.DocumentEventBehavior = [CGDocumentEventBehavior, CG.BaseBehavior];
</script>
